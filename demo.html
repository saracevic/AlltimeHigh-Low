<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Crypto Real-Time Tracker Pro - DEMO with Mock Data</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background: linear-gradient(135deg, #0a0e27 0%, #1a1f3a 50%, #0f1419 100%);
            color: #fff;
            padding: 20px;
            min-height: 100vh;
        }

        .demo-banner {
            background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);
            padding: 15px;
            text-align: center;
            font-weight: 700;
            margin-bottom: 20px;
            border-radius: 12px;
            box-shadow: 0 4px 15px rgba(239, 68, 68, 0.4);
        }

        .header {
            text-align: center;
            margin-bottom: 35px;
        }

        .header h1 {
            font-size: 3em;
            margin-bottom: 12px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 50%, #f093fb 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            font-weight: 900;
            letter-spacing: -1.5px;
        }

        .header p {
            font-size: 1.1em;
            color: rgba(255, 255, 255, 0.65);
            margin-top: 8px;
            font-weight: 500;
        }

        .update-info {
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: rgba(102, 126, 234, 0.1);
            padding: 20px 32px;
            border-radius: 16px;
            margin-bottom: 28px;
            backdrop-filter: blur(25px);
            border: 1px solid rgba(102, 126, 234, 0.2);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4);
            flex-wrap: wrap;
            gap: 15px;
        }

        .update-info span {
            font-size: 1em;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .status-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: #10b981;
            animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
            box-shadow: 0 0 15px #10b981;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; transform: scale(1); }
            50% { opacity: 0.7; transform: scale(0.95); }
        }

        .search-box {
            margin-bottom: 22px;
        }

        .search-box input {
            width: 100%;
            padding: 20px 24px;
            font-size: 1.1em;
            border: 2px solid rgba(102, 126, 234, 0.2);
            border-radius: 14px;
            background: rgba(26, 31, 58, 0.6);
            color: #fff;
            backdrop-filter: blur(20px);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            font-weight: 500;
        }

        .search-box input:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 25px rgba(102, 126, 234, 0.35);
            background: rgba(26, 31, 58, 0.8);
        }

        .search-box input::placeholder {
            color: rgba(255, 255, 255, 0.4);
        }

        .filter-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
            gap: 18px;
            margin-bottom: 28px;
            background: rgba(26, 31, 58, 0.4);
            padding: 28px;
            border-radius: 16px;
            backdrop-filter: blur(25px);
            border: 1px solid rgba(102, 126, 234, 0.15);
        }

        .filter-group {
            display: flex;
            flex-direction: column;
            gap: 11px;
        }

        .filter-group label {
            font-size: 0.88em;
            font-weight: 700;
            color: #a5b4fc;
            text-transform: uppercase;
            letter-spacing: 0.8px;
        }

        .filter-group select {
            padding: 14px 16px;
            border: 2px solid rgba(102, 126, 234, 0.2);
            border-radius: 12px;
            background: rgba(15, 20, 25, 0.6);
            color: #fff;
            font-size: 0.98em;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .filter-group select:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 20px rgba(102, 126, 234, 0.25);
        }

        .reset-btn {
            padding: 14px 28px;
            background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);
            border: none;
            border-radius: 12px;
            color: #fff;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
            align-self: end;
            font-size: 0.98em;
            box-shadow: 0 4px 15px rgba(239, 68, 68, 0.3);
        }

        .reset-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 7px 25px rgba(239, 68, 68, 0.5);
        }

        .coin-count {
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 1.08em;
            color: #a5b4fc;
            align-self: end;
            background: rgba(102, 126, 234, 0.15);
            padding: 14px 22px;
            border-radius: 12px;
            border: 1px solid rgba(102, 126, 234, 0.3);
        }

        .coin-count span {
            color: #f093fb;
            font-size: 1.35em;
            margin: 0 6px;
        }

        .table-container {
            background: rgba(26, 31, 58, 0.4);
            border-radius: 16px;
            overflow-x: auto;
            backdrop-filter: blur(25px);
            box-shadow: 0 12px 48px rgba(0, 0, 0, 0.5);
            border: 1px solid rgba(102, 126, 234, 0.15);
        }

        table {
            width: 100%;
            border-collapse: collapse;
            min-width: 1200px;
        }

        thead {
            background: rgba(102, 126, 234, 0.15);
            position: sticky;
            top: 0;
            z-index: 10;
        }

        th {
            padding: 24px 16px;
            text-align: left;
            font-weight: 800;
            font-size: 0.88em;
            letter-spacing: 1px;
            border-bottom: 2px solid rgba(102, 126, 234, 0.4);
            text-transform: uppercase;
            color: #c7d2fe;
        }

        .sortable {
            cursor: pointer;
            user-select: none;
            position: relative;
            padding-right: 24px !important;
        }

        .sortable:hover {
            color: #f093fb;
        }

        .sortable::after {
            content: '‚áÖ';
            position: absolute;
            right: 8px;
            opacity: 0.5;
        }

        .sortable.asc::after {
            content: '‚Üë';
            opacity: 1;
        }

        .sortable.desc::after {
            content: '‚Üì';
            opacity: 1;
        }

        tbody tr {
            border-bottom: 1px solid rgba(102, 126, 234, 0.08);
            transition: all 0.3s ease;
        }

        tbody tr:hover {
            background: rgba(102, 126, 234, 0.12);
        }

        td {
            padding: 20px 16px;
            font-size: 0.95em;
            font-weight: 500;
        }

        .star {
            cursor: pointer;
            font-size: 1.3em;
            margin-right: 8px;
            transition: all 0.2s ease;
            display: inline-block;
        }

        .star:hover {
            transform: scale(1.2);
        }

        .star.active {
            color: #fbbf24;
            text-shadow: 0 0 10px #fbbf24;
        }

        .coin-name {
            font-weight: 800;
            font-size: 1.2em;
            color: #f093fb;
            text-shadow: 0 0 12px rgba(240, 147, 251, 0.4);
        }

        .price {
            font-weight: 700;
            color: #60a5fa;
            font-size: 1.08em;
        }

        .price-change {
            display: inline-flex;
            align-items: center;
            gap: 4px;
            font-size: 0.9em;
            margin-left: 8px;
        }

        .price-change.up {
            color: #10b981;
        }

        .price-change.down {
            color: #ef4444;
        }

        .ath-value {
            font-weight: 700;
            color: #10b981;
            font-size: 1.05em;
        }

        .atl-value {
            font-weight: 700;
            color: #ef4444;
            font-size: 1.05em;
        }

        .badge {
            display: inline-block;
            padding: 7px 14px;
            border-radius: 22px;
            font-weight: 800;
            font-size: 0.92em;
            letter-spacing: 0.4px;
        }

        .badge-green {
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
            color: #fff;
            box-shadow: 0 4px 12px rgba(16, 185, 129, 0.35);
        }

        .badge-red {
            background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);
            color: #fff;
            box-shadow: 0 4px 12px rgba(239, 68, 68, 0.35);
        }

        .fib-50 {
            color: #fbbf24;
            font-weight: 700;
            font-size: 1.02em;
        }

        .expand-btn {
            cursor: pointer;
            padding: 6px 12px;
            background: rgba(102, 126, 234, 0.2);
            border-radius: 6px;
            font-size: 0.9em;
            transition: all 0.2s ease;
            display: inline-block;
            border: 1px solid rgba(102, 126, 234, 0.3);
        }

        .expand-btn:hover {
            background: rgba(102, 126, 234, 0.4);
            transform: scale(1.05);
        }

        .detail-row {
            background: rgba(15, 20, 25, 0.6);
            border-top: 2px solid rgba(102, 126, 234, 0.3);
            display: none;
        }

        .detail-row.visible {
            display: table-row;
        }

        .detail-content {
            padding: 30px;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
        }

        .indicator-card {
            background: rgba(26, 31, 58, 0.6);
            padding: 20px;
            border-radius: 12px;
            border: 1px solid rgba(102, 126, 234, 0.2);
        }

        .indicator-card h3 {
            color: #a5b4fc;
            font-size: 0.9em;
            margin-bottom: 12px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .fib-levels {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .fib-level-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px 14px;
            background: rgba(15, 20, 25, 0.4);
            border-radius: 8px;
            border-left: 3px solid;
        }

        .fib-level-item.retracement {
            border-left-color: #10b981;
        }

        .fib-level-item.extension {
            border-left-color: #f59e0b;
        }

        .fib-level-item.current {
            background: rgba(102, 126, 234, 0.2);
            border-left-color: #667eea;
            font-weight: 700;
        }

        .technical-bars {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .bar-label {
            font-size: 0.85em;
            color: rgba(255, 255, 255, 0.6);
            margin-bottom: 4px;
        }

        .bar-container {
            position: relative;
            height: 24px;
            background: rgba(15, 20, 25, 0.6);
            border-radius: 6px;
            overflow: hidden;
        }

        .bar-fill {
            height: 100%;
            border-radius: 6px;
            transition: width 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: flex-end;
            padding-right: 8px;
            font-size: 0.85em;
            font-weight: 700;
        }

        .bar-fill.bullish {
            background: linear-gradient(90deg, rgba(16, 185, 129, 0.3), rgba(16, 185, 129, 0.6));
        }

        .bar-fill.bearish {
            background: linear-gradient(90deg, rgba(239, 68, 68, 0.3), rgba(239, 68, 68, 0.6));
        }

        .bar-fill.neutral {
            background: linear-gradient(90deg, rgba(251, 191, 36, 0.3), rgba(251, 191, 36, 0.6));
        }

        .ma-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
        }

        .ma-item {
            padding: 10px;
            background: rgba(15, 20, 25, 0.4);
            border-radius: 8px;
            text-align: center;
        }

        .ma-label {
            font-size: 0.8em;
            color: rgba(255, 255, 255, 0.6);
            margin-bottom: 4px;
        }

        .ma-value {
            font-size: 1.1em;
            font-weight: 700;
        }

        @media (max-width: 768px) {
            .header h1 { font-size: 2.2em; }
            th, td { padding: 14px 12px; font-size: 0.85em; }
            .filter-container { grid-template-columns: 1fr; }
            .detail-content { grid-template-columns: 1fr; }
        }

        ::-webkit-scrollbar { width: 12px; height: 12px; }
        ::-webkit-scrollbar-track { background: rgba(26, 31, 58, 0.4); }
        ::-webkit-scrollbar-thumb { background: rgba(102, 126, 234, 0.4); border-radius: 10px; }
        ::-webkit-scrollbar-thumb:hover { background: rgba(102, 126, 234, 0.6); }
    </style>
</head>
<body>
    <div class="demo-banner">
        üé≠ DEMO MODE - Using Mock Data for Demonstration Purposes
    </div>

    <div class="header">
        <h1>üìä Crypto Real-Time Tracker Pro</h1>
        <p>Real-Time WebSocket Data ‚Ä¢ Complete Technical Analysis ‚Ä¢ Fibonacci Levels ‚Ä¢ Moving Averages ‚Ä¢ RSI & MACD</p>
    </div>

    <div class="update-info">
        <span>
            <span class="status-dot"></span>
            <span>WebSocket Connected - Real-Time Data (Simulated)</span>
        </span>
        <span id="lastUpdate">Last Update: --:--:--</span>
        <span id="priceUpdates">Price Updates: <span id="updateCount">0</span></span>
    </div>

    <div class="search-box">
        <input type="text" id="searchInput" placeholder="üîç Search coins... (e.g., BTC, ETH, SOL, ADA)">
    </div>

    <div class="filter-container">
        <div class="filter-group">
            <label>üéØ Fib 50% Distance</label>
            <select id="filterFib">
                <option value="all">All</option>
                <option value="0-5">0% - 5%</option>
                <option value="5-10">5% - 10%</option>
                <option value="10-20">10% - 20%</option>
                <option value="20-50">20% - 50%</option>
                <option value="50+">50%+</option>
                <option value="negative">Below Fib 50%</option>
            </select>
        </div>

        <div class="filter-group">
            <label>‚≠ê Filter</label>
            <select id="filterFavorites">
                <option value="all">All Coins</option>
                <option value="favorites">Favorites Only</option>
            </select>
        </div>

        <button id="resetFilters" class="reset-btn">üîÑ Reset Filters</button>
        <div class="coin-count">Showing: <span id="coinCount">0</span> / <span id="totalCount">0</span></div>
    </div>

    <div class="table-container">
        <table>
            <thead>
                <tr>
                    <th>#</th>
                    <th>‚≠ê</th>
                    <th class="sortable" data-sort="symbol">Coin</th>
                    <th class="sortable" data-sort="price">Current Price</th>
                    <th class="sortable" data-sort="ath">ATH</th>
                    <th class="sortable" data-sort="atl">ATL</th>
                    <th class="sortable" data-sort="fib50">Fib 50%</th>
                    <th class="sortable" data-sort="fib50Percent">Distance %</th>
                    <th class="sortable" data-sort="marketCap">Market Cap</th>
                    <th>Details</th>
                </tr>
            </thead>
            <tbody id="dataTable"></tbody>
        </table>
    </div>

    <script>
        // Mock data for demonstration
        const MOCK_DATA = [
            { symbol: 'BTC', price: 95234.50, ath: 108135.00, atl: 67.81, marketCap: 1876543210000 },
            { symbol: 'ETH', price: 3421.67, ath: 4878.26, atl: 0.43, marketCap: 411234567000 },
            { symbol: 'BNB', price: 612.34, ath: 686.31, atl: 0.096, marketCap: 89123456700 },
            { symbol: 'SOL', price: 142.89, ath: 259.96, atl: 0.50, marketCap: 67890123450 },
            { symbol: 'XRP', price: 2.87, ath: 3.84, atl: 0.0028, marketCap: 162345678900 },
            { symbol: 'ADA', price: 0.9456, ath: 3.09, atl: 0.017, marketCap: 33456789012 },
            { symbol: 'DOGE', price: 0.3421, ath: 0.7376, atl: 0.000087, marketCap: 49876543210 },
            { symbol: 'TRX', price: 0.2456, ath: 0.2316, atl: 0.0018, marketCap: 21234567890 },
            { symbol: 'DOT', price: 7.23, ath: 55.09, atl: 2.69, marketCap: 10987654321 },
            { symbol: 'MATIC', price: 0.4567, ath: 2.92, atl: 0.0031, marketCap: 4567890123 },
            { symbol: 'LTC', price: 102.34, ath: 412.96, atl: 1.11, marketCap: 7654321098 },
            { symbol: 'BCH', price: 456.78, ath: 3785.82, atl: 76.93, marketCap: 9012345678 }
        ];

        let allCoins = [];
        let favorites = new Set(JSON.parse(localStorage.getItem('cryptoFavorites') || '[]'));
        let currentSort = { column: null, direction: 'asc' };
        let currentFilters = { search: '', fib: 'all', favorites: 'all' };
        let updateCounter = 0;

        function formatPrice(price) {
            if (!price) return '$0.00';
            if (price >= 1) return '$' + price.toLocaleString('en-US', {minimumFractionDigits: 2, maximumFractionDigits: 2});
            if (price >= 0.01) return '$' + price.toLocaleString('en-US', {minimumFractionDigits: 4, maximumFractionDigits: 4});
            return '$' + price.toLocaleString('en-US', {minimumFractionDigits: 6, maximumFractionDigits: 8});
        }

        function formatMarketCap(cap) {
            if (!cap) return 'N/A';
            if (cap >= 1e12) return '$' + (cap / 1e12).toFixed(2) + 'T';
            if (cap >= 1e9) return '$' + (cap / 1e9).toFixed(2) + 'B';
            if (cap >= 1e6) return '$' + (cap / 1e6).toFixed(2) + 'M';
            return '$' + cap.toLocaleString('en-US', {maximumFractionDigits: 0});
        }

        function calculatePercentage(current, target) {
            if (!current || !target) return '0.00';
            return ((current - target) / target * 100).toFixed(2);
        }

        function calculateFib50(ath, atl) {
            return Math.sqrt(ath * atl);
        }

        function calculateFibonacciLevels(ath, atl) {
            const range = ath - atl;
            return {
                retracements: {
                    '0%': atl,
                    '23.6%': atl + (range * 0.236),
                    '38.2%': atl + (range * 0.382),
                    '50%': calculateFib50(ath, atl),
                    '61.8%': atl + (range * 0.618),
                    '78.6%': atl + (range * 0.786),
                    '100%': ath
                },
                extensions: {
                    '127.2%': ath + (range * 0.272),
                    '161.8%': ath + (range * 0.618),
                    '200%': ath + range,
                    '261.8%': ath + (range * 1.618)
                }
            };
        }

        function initializeMockData() {
            allCoins = MOCK_DATA.map(coin => {
                const fib50 = calculateFib50(coin.ath, coin.atl);
                const fib50Percent = parseFloat(calculatePercentage(coin.price, fib50));
                
                return {
                    ...coin,
                    fib50,
                    fib50Percent,
                    priceChange: 'none',
                    technicals: {
                        ma20: coin.price * 0.98,
                        ma50: coin.price * 0.95,
                        ma100: coin.price * 0.92,
                        ma200: coin.price * 0.88,
                        rsi: 50 + (Math.random() * 40 - 20),
                        macd: { histogram: Math.random() * 0.02 - 0.01 }
                    }
                };
            });
            
            applyFilters();
            updateTimestamp();
        }

        function simulatePriceUpdate() {
            allCoins.forEach(coin => {
                const change = (Math.random() - 0.5) * 0.01;
                coin.price = coin.price * (1 + change);
                coin.priceChange = change > 0 ? 'up' : change < 0 ? 'down' : 'none';
                coin.fib50 = calculateFib50(coin.ath, coin.atl);
                coin.fib50Percent = parseFloat(calculatePercentage(coin.price, coin.fib50));
            });
            
            updateCounter++;
            document.getElementById('updateCount').textContent = updateCounter;
            applyFilters();
        }

        function toggleFavorite(symbol) {
            if (favorites.has(symbol)) {
                favorites.delete(symbol);
            } else {
                favorites.add(symbol);
            }
            localStorage.setItem('cryptoFavorites', JSON.stringify([...favorites]));
            applyFilters();
        }

        function toggleDetails(symbol) {
            const detailRow = document.getElementById(`detail-${symbol}`);
            const isVisible = detailRow.classList.contains('visible');
            
            document.querySelectorAll('.detail-row').forEach(row => {
                row.classList.remove('visible');
            });
            
            if (!isVisible) {
                detailRow.classList.add('visible');
            }
        }

        function matchesFilter(percent, filterValue) {
            const p = parseFloat(percent);
            switch(filterValue) {
                case 'all': return true;
                case '0-5': return p >= 0 && p <= 5;
                case '5-10': return p > 5 && p <= 10;
                case '10-20': return p > 10 && p <= 20;
                case '20-50': return p > 20 && p <= 50;
                case '50+': return p > 50;
                case 'negative': return p < 0;
                default: return true;
            }
        }

        function applyFilters() {
            let filtered = [...allCoins];
            
            if (currentFilters.search) {
                filtered = filtered.filter(c => 
                    c.symbol.toUpperCase().includes(currentFilters.search.toUpperCase())
                );
            }
            
            if (currentFilters.fib !== 'all') {
                filtered = filtered.filter(c => 
                    matchesFilter(c.fib50Percent, currentFilters.fib)
                );
            }
            
            if (currentFilters.favorites === 'favorites') {
                filtered = filtered.filter(c => favorites.has(c.symbol));
            }
            
            if (currentSort.column) {
                filtered.sort((a, b) => {
                    let aVal = a[currentSort.column];
                    let bVal = b[currentSort.column];
                    
                    if (typeof aVal === 'string') {
                        return currentSort.direction === 'asc' ? 
                            aVal.localeCompare(bVal) : bVal.localeCompare(aVal);
                    }
                    
                    return currentSort.direction === 'asc' ? 
                        (aVal || 0) - (bVal || 0) : (bVal || 0) - (aVal || 0);
                });
            }
            
            renderTable(filtered);
        }

        function renderTable(coins) {
            const tableBody = document.getElementById('dataTable');
            
            if (coins.length === 0) {
                tableBody.innerHTML = `<tr><td colspan="10" style="text-align: center; padding: 60px;">No results found üòî</td></tr>`;
                document.getElementById('coinCount').textContent = '0';
                return;
            }

            tableBody.innerHTML = coins.map((coin, index) => `
                <tr data-symbol="${coin.symbol}">
                    <td style="color: rgba(255, 255, 255, 0.5); font-weight: 600;">${index + 1}</td>
                    <td>
                        <span class="star ${favorites.has(coin.symbol) ? 'active' : ''}" 
                              onclick="toggleFavorite('${coin.symbol}')">
                            ${favorites.has(coin.symbol) ? '‚≠ê' : '‚òÜ'}
                        </span>
                    </td>
                    <td class="coin-name">${coin.symbol}</td>
                    <td class="price">
                        ${formatPrice(coin.price)}
                        ${coin.priceChange !== 'none' ? 
                            `<span class="price-change ${coin.priceChange}">
                                ${coin.priceChange === 'up' ? '‚ñ≤' : '‚ñº'}
                            </span>` : ''}
                    </td>
                    <td class="ath-value">${formatPrice(coin.ath)}</td>
                    <td class="atl-value">${formatPrice(coin.atl)}</td>
                    <td class="fib-50">${formatPrice(coin.fib50)}</td>
                    <td>
                        <span class="badge ${coin.fib50Percent >= 0 ? 'badge-green' : 'badge-red'}">
                            ${coin.fib50Percent >= 0 ? '+' : ''}${coin.fib50Percent.toFixed(2)}%
                        </span>
                    </td>
                    <td style="color: #60a5fa; font-weight: 600;">${formatMarketCap(coin.marketCap)}</td>
                    <td>
                        <span class="expand-btn" onclick="toggleDetails('${coin.symbol}')">
                            üìä View
                        </span>
                    </td>
                </tr>
                <tr class="detail-row" id="detail-${coin.symbol}">
                    <td colspan="10">
                        ${renderDetailView(coin)}
                    </td>
                </tr>
            `).join('');

            document.getElementById('coinCount').textContent = coins.length;
            document.getElementById('totalCount').textContent = allCoins.length;
        }

        function renderDetailView(coin) {
            const fibLevels = calculateFibonacciLevels(coin.ath, coin.atl);
            const tech = coin.technicals || {};
            const rsi = tech.rsi || 50;
            const macd = tech.macd || { histogram: 0 };
            
            return `
                <div class="detail-content">
                    <div class="indicator-card">
                        <h3>üìê Fibonacci Retracement Levels</h3>
                        <div class="fib-levels">
                            ${Object.entries(fibLevels.retracements).map(([level, price]) => `
                                <div class="fib-level-item retracement ${Math.abs(coin.price - price) / coin.price < 0.05 ? 'current' : ''}">
                                    <span>${level} Level</span>
                                    <strong>${formatPrice(price)}</strong>
                                </div>
                            `).join('')}
                        </div>
                    </div>
                    
                    <div class="indicator-card">
                        <h3>üéØ Fibonacci Extension Levels</h3>
                        <div class="fib-levels">
                            ${Object.entries(fibLevels.extensions).map(([level, price]) => `
                                <div class="fib-level-item extension">
                                    <span>${level} Target</span>
                                    <strong>${formatPrice(price)}</strong>
                                </div>
                            `).join('')}
                        </div>
                    </div>
                    
                    <div class="indicator-card">
                        <h3>üìä Moving Averages</h3>
                        <div class="ma-grid">
                            <div class="ma-item">
                                <div class="ma-label">MA 20</div>
                                <div class="ma-value" style="color: ${coin.price > (tech.ma20 || 0) ? '#10b981' : '#ef4444'}">
                                    ${formatPrice(tech.ma20)}
                                </div>
                            </div>
                            <div class="ma-item">
                                <div class="ma-label">MA 50</div>
                                <div class="ma-value" style="color: ${coin.price > (tech.ma50 || 0) ? '#10b981' : '#ef4444'}">
                                    ${formatPrice(tech.ma50)}
                                </div>
                            </div>
                            <div class="ma-item">
                                <div class="ma-label">MA 100</div>
                                <div class="ma-value" style="color: ${coin.price > (tech.ma100 || 0) ? '#10b981' : '#ef4444'}">
                                    ${formatPrice(tech.ma100)}
                                </div>
                            </div>
                            <div class="ma-item">
                                <div class="ma-label">MA 200</div>
                                <div class="ma-value" style="color: ${coin.price > (tech.ma200 || 0) ? '#10b981' : '#ef4444'}">
                                    ${formatPrice(tech.ma200)}
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="indicator-card">
                        <h3>üìà Technical Indicators</h3>
                        <div class="technical-bars">
                            <div>
                                <div class="bar-label">RSI (14): ${rsi.toFixed(1)} ${rsi > 70 ? '(Overbought)' : rsi < 30 ? '(Oversold)' : '(Neutral)'}</div>
                                <div class="bar-container">
                                    <div class="bar-fill ${rsi > 70 ? 'bearish' : rsi < 30 ? 'bullish' : 'neutral'}" 
                                         style="width: ${rsi}%">
                                        ${rsi.toFixed(1)}
                                    </div>
                                </div>
                            </div>
                            
                            <div>
                                <div class="bar-label">MACD Histogram: ${macd.histogram > 0 ? 'Bullish' : 'Bearish'}</div>
                                <div class="bar-container">
                                    <div class="bar-fill ${macd.histogram > 0 ? 'bullish' : 'bearish'}" 
                                         style="width: ${Math.min(100, Math.abs(macd.histogram) * 500 + 20)}%">
                                        ${macd.histogram.toFixed(4)}
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="indicator-card">
                        <h3>‚ÑπÔ∏è Coin Information</h3>
                        <div style="font-size: 0.95em; line-height: 1.8;">
                            <div><strong>Symbol:</strong> ${coin.symbol}</div>
                            <div><strong>Current Price:</strong> ${formatPrice(coin.price)}</div>
                            <div><strong>Market Cap:</strong> ${formatMarketCap(coin.marketCap)}</div>
                            <div><strong>% from ATH:</strong> <span style="color: #ef4444">${calculatePercentage(coin.price, coin.ath)}%</span></div>
                            <div><strong>% from ATL:</strong> <span style="color: #10b981">+${calculatePercentage(coin.price, coin.atl)}%</span></div>
                        </div>
                    </div>
                    
                    <div class="indicator-card">
                        <h3>üéØ Support & Resistance</h3>
                        <div class="fib-levels">
                            <div class="fib-level-item retracement">
                                <span>Strong Support</span>
                                <strong>${formatPrice(fibLevels.retracements['38.2%'])}</strong>
                            </div>
                            <div class="fib-level-item retracement">
                                <span>Key Support</span>
                                <strong>${formatPrice(fibLevels.retracements['50%'])}</strong>
                            </div>
                            <div class="fib-level-item extension">
                                <span>First Resistance</span>
                                <strong>${formatPrice(fibLevels.retracements['61.8%'])}</strong>
                            </div>
                            <div class="fib-level-item extension">
                                <span>Strong Resistance</span>
                                <strong>${formatPrice(coin.ath)}</strong>
                            </div>
                        </div>
                    </div>
                </div>
            `;
        }

        function updateTimestamp() {
            document.getElementById('lastUpdate').textContent = 
                `Last Update: ${new Date().toLocaleTimeString('en-US')}`;
        }

        // Event listeners
        document.getElementById('searchInput').addEventListener('input', (e) => {
            currentFilters.search = e.target.value;
            applyFilters();
        });

        document.getElementById('filterFib').addEventListener('change', (e) => {
            currentFilters.fib = e.target.value;
            applyFilters();
        });

        document.getElementById('filterFavorites').addEventListener('change', (e) => {
            currentFilters.favorites = e.target.value;
            applyFilters();
        });

        document.getElementById('resetFilters').addEventListener('click', () => {
            currentFilters = { search: '', fib: 'all', favorites: 'all' };
            document.getElementById('searchInput').value = '';
            document.getElementById('filterFib').value = 'all';
            document.getElementById('filterFavorites').value = 'all';
            applyFilters();
        });

        document.querySelectorAll('.sortable').forEach(th => {
            th.addEventListener('click', () => {
                const column = th.dataset.sort;
                
                if (currentSort.column === column) {
                    currentSort.direction = currentSort.direction === 'asc' ? 'desc' : 'asc';
                } else {
                    currentSort.column = column;
                    currentSort.direction = 'asc';
                }
                
                document.querySelectorAll('.sortable').forEach(t => {
                    t.classList.remove('asc', 'desc');
                });
                th.classList.add(currentSort.direction);
                
                applyFilters();
            });
        });

        // Initialize
        initializeMockData();
        setInterval(simulatePriceUpdate, 3000); // Simulate price updates every 3 seconds
        setInterval(updateTimestamp, 1000);
    </script>
</body>
</html>
